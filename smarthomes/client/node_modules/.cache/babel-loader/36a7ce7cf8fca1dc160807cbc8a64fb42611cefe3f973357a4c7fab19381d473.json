{"ast":null,"code":"import React,{useState,useEffect}from\"react\";import{useData}from\"./Data\";import{useNavigate}from\"react-router-dom\";import{useUser}from\"./UserContext\";import{useCart}from\"./CartContext\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const itemStyle={WebkitTextSizeAdjust:\"100%\",WebkitTapHighlightColor:\"rgba(0,0,0,0)\",color:\"#333\",fontFamily:'Georgia, \"Times New Roman\", Times, serif',fontSize:\"12px !important\",borderSpacing:0,borderCollapse:\"collapse\",lineHeight:\"240%\",listStyle:\"none\",boxSizing:\"unset\",marginBottom:\"5px\",marginTop:\"6px\",border:\"1px solid #000\"};const shopitem={WebkitTextSizeAdjust:\"100%\",WebkitTapHighlightColor:\"rgba(0,0,0,0)\",lineHeight:\"1.42857143\",color:\"#333\",fontFamily:'Georgia, \"Times New Roman\", Times, serif',fontSize:\"12px !important\",borderSpacing:0,borderCollapse:\"collapse\",boxSizing:\"unset\",borderRadius:\"5px\",border:\"1px solid #000\",padding:\"4px\",width:\"200px\",marginLeft:\"auto\",marginRight:\"auto\"};const img={WebkitTextSizeAdjust:\"100%\",WebkitTapHighlightColor:\"rgba(0,0,0,0)\",color:\"#333\",fontFamily:'Georgia, \"Times New Roman\", Times, serif',fontSize:\"12px !important\",borderSpacing:0,borderCollapse:\"collapse\",lineHeight:\"240%\",listStyle:\"none\",boxSizing:\"unset\",border:0,verticalAlign:\"middle\",display:\"block\",width:\"180px\",height:\"160px\",marginLeft:\"auto\",marginRight:\"auto\"};const Carousel=_ref=>{let{items}=_ref;const{loggedUser}=useUser();const{addToCart}=useCart();const{navigate}=useNavigate();const{accessories}=useData();const[activeList,setActiveList]=useState([]);let[index,setindex]=useState(0);const allRelatedItemsArray=items===null||items===void 0?void 0:items.flatMap(item=>accessories===null||accessories===void 0?void 0:accessories.filter(element=>{var _item$accessories;return(_item$accessories=item.accessories)===null||_item$accessories===void 0?void 0:_item$accessories.includes(element.id);}));setInterval(()=>{const now=new Date();console.log(now);},3000);// setInterval(() => {\n//   index=(index+1)%3\n// }, 3000);\nlet value=[];useEffect(()=>{value=allRelatedItemsArray===null||allRelatedItemsArray===void 0?void 0:allRelatedItemsArray.slice(index,index+3);console.log(\"Index changed, recalculating activeList...\");console.log(\"Current index:\",index);console.log(\"Current allRelatedItemsArray:\",value);setActiveList(value);console.log(\"Updated activeList:\",value);},[index]);const handleBuyNow=doorBell=>{if(!loggedUser){navigate(\"/Login\",{state:{from:\"Please Login to add items to cart\"}});return;}addToCart(doorBell);navigate(\"/Cart\");};// const handlePrev = () => {\n//   setActiveIndex((prevIndex) =>\n//     prevIndex === 0 ? items.length - 1 : prevIndex - 1\n//   );\n// };\n// const handleNext = () => {\n//   setActiveIndex((prevIndex) =>\n//     prevIndex === items.length - 1 ? 0 : prevIndex + 1\n//   );\n// };\nreturn/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Accessories\"}),/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",justifyContent:\"center\",margin:\"10px 60px 10px 230px\",border:\"1px solid #ddd\"},children:[/*#__PURE__*/_jsx(\"button\",{children:\"Previous\"}),/*#__PURE__*/_jsx(\"div\",{style:{display:\"flex\",flexGrow:\"initial\",padding:\"10px\"},children:activeList===null||activeList===void 0?void 0:activeList.map((item,index)=>{return/*#__PURE__*/_jsxs(\"ul\",{style:{marginLeft:\"10px\",display:\"flex\",flexDirection:\"column\",border:\"1px solid #ddd\"},children:[/*#__PURE__*/_jsx(\"h3\",{children:item.name}),/*#__PURE__*/_jsxs(\"strong\",{children:[\"$\",item.price]}),/*#__PURE__*/_jsx(\"li\",{style:itemStyle,children:/*#__PURE__*/_jsx(\"img\",{style:img,src:\"images/\".concat(item.type,\"/\").concat(item.image),alt:\"\"})}),/*#__PURE__*/_jsx(\"button\",{style:shopitem,type:\"button\",onClick:()=>handleBuyNow(item),children:\"Buy Now\"})]});})}),/*#__PURE__*/_jsx(\"button\",{children:\"Next\"})]})]});};export default Carousel;","map":{"version":3,"names":["React","useState","useEffect","useData","useNavigate","useUser","useCart","jsx","_jsx","jsxs","_jsxs","itemStyle","WebkitTextSizeAdjust","WebkitTapHighlightColor","color","fontFamily","fontSize","borderSpacing","borderCollapse","lineHeight","listStyle","boxSizing","marginBottom","marginTop","border","shopitem","borderRadius","padding","width","marginLeft","marginRight","img","verticalAlign","display","height","Carousel","_ref","items","loggedUser","addToCart","navigate","accessories","activeList","setActiveList","index","setindex","allRelatedItemsArray","flatMap","item","filter","element","_item$accessories","includes","id","setInterval","now","Date","console","log","value","slice","handleBuyNow","doorBell","state","from","children","style","justifyContent","margin","flexGrow","map","flexDirection","name","price","src","concat","type","image","alt","onClick"],"sources":["/Users/subramanyaganesh/Desktop/reactAssignment/smarthomes/src/components/Carousel.jsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { useData } from \"./Data\";\nimport { useNavigate } from \"react-router-dom\";\nimport { useUser } from \"./UserContext\";\nimport { useCart } from \"./CartContext\";\n\nconst itemStyle = {\n  WebkitTextSizeAdjust: \"100%\",\n  WebkitTapHighlightColor: \"rgba(0,0,0,0)\",\n  color: \"#333\",\n  fontFamily: 'Georgia, \"Times New Roman\", Times, serif',\n  fontSize: \"12px !important\",\n  borderSpacing: 0,\n  borderCollapse: \"collapse\",\n  lineHeight: \"240%\",\n  listStyle: \"none\",\n  boxSizing: \"unset\",\n  marginBottom: \"5px\",\n  marginTop: \"6px\",\n  border: \"1px solid #000\",\n};\n\nconst shopitem = {\n  WebkitTextSizeAdjust: \"100%\",\n  WebkitTapHighlightColor: \"rgba(0,0,0,0)\",\n  lineHeight: \"1.42857143\",\n  color: \"#333\",\n  fontFamily: 'Georgia, \"Times New Roman\", Times, serif',\n  fontSize: \"12px !important\",\n  borderSpacing: 0,\n  borderCollapse: \"collapse\",\n  boxSizing: \"unset\",\n  borderRadius: \"5px\",\n  border: \"1px solid #000\",\n  padding: \"4px\",\n  width: \"200px\",\n  marginLeft: \"auto\",\n  marginRight: \"auto\",\n};\n\nconst img = {\n  WebkitTextSizeAdjust: \"100%\",\n  WebkitTapHighlightColor: \"rgba(0,0,0,0)\",\n  color: \"#333\",\n  fontFamily: 'Georgia, \"Times New Roman\", Times, serif',\n  fontSize: \"12px !important\",\n  borderSpacing: 0,\n  borderCollapse: \"collapse\",\n  lineHeight: \"240%\",\n  listStyle: \"none\",\n  boxSizing: \"unset\",\n  border: 0,\n  verticalAlign: \"middle\",\n  display: \"block\",\n  width: \"180px\",\n  height: \"160px\",\n  marginLeft: \"auto\",\n  marginRight: \"auto\",\n};\n\nconst Carousel = ({ items }) => {\n  const { loggedUser } = useUser();\n  const { addToCart } = useCart();\n  const { navigate } = useNavigate();\n  const { accessories } = useData();\n  const [activeList, setActiveList] = useState([]);\n  let [index, setindex] = useState(0);\n\n  const allRelatedItemsArray = items?.flatMap((item) =>\n    accessories?.filter((element) => item.accessories?.includes(element.id))\n  );\n\n  setInterval(() => {\n    const now=new Date();\n    console.log(now);}, 3000);\n\n  // setInterval(() => {\n  //   index=(index+1)%3\n  // }, 3000);\n\n  let value = []\n  useEffect(() => {\n    value = allRelatedItemsArray?.slice(index, index + 3)\n    console.log(\"Index changed, recalculating activeList...\");\n    console.log(\"Current index:\", index);\n    console.log(\"Current allRelatedItemsArray:\", value);\n    setActiveList(value);\n    console.log(\"Updated activeList:\", value);\n  }, [index]); \n\n  const handleBuyNow = (doorBell) => {\n    if (!loggedUser) {\n      navigate(\"/Login\", {\n        state: { from: \"Please Login to add items to cart\" },\n      });\n      return;\n    }\n    addToCart(doorBell);\n    navigate(\"/Cart\");\n  };\n\n  // const handlePrev = () => {\n  //   setActiveIndex((prevIndex) =>\n  //     prevIndex === 0 ? items.length - 1 : prevIndex - 1\n  //   );\n  // };\n\n  // const handleNext = () => {\n  //   setActiveIndex((prevIndex) =>\n  //     prevIndex === items.length - 1 ? 0 : prevIndex + 1\n  //   );\n  // };\n\n  return (\n    <div>\n      <h2>Accessories</h2>\n      <div\n        style={{\n          display: \"flex\",\n          justifyContent: \"center\",\n          margin: \"10px 60px 10px 230px\",\n          border: \"1px solid #ddd\",\n        }}\n      >\n        <button>Previous</button>\n        {\n          <div\n            style={{ display: \"flex\", flexGrow: \"initial\", padding: \"10px\" }}\n          >\n            {activeList?.map((item, index) => {\n              return (\n                <ul\n                  style={{\n                    marginLeft: \"10px\",\n                    display: \"flex\",\n                    flexDirection: \"column\",\n                    border: \"1px solid #ddd\",\n                  }}\n                >\n                  <h3>{item.name}</h3>\n                  <strong>${item.price}</strong>\n                  <li style={itemStyle}>\n                    <img\n                      style={img}\n                      src={`images/${item.type}/${item.image}`}\n                      alt=\"\"\n                    />\n                  </li>\n                  <button\n                    style={shopitem}\n                    type=\"button\"\n                    onClick={() => handleBuyNow(item)}\n                  >\n                    Buy Now\n                  </button>\n                </ul>\n              );\n            })}\n          </div>\n        }\n        <button>Next</button>\n      </div>\n    </div>\n  );\n};\nexport default Carousel;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}